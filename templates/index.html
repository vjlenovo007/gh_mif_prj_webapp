<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Black–Litterman Portfolio Optimizer</title>
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <h1>Black–Litterman Portfolio Optimizer</h1>
    <form method="POST">
      <fieldset>
        <legend>Select tickers</legend>
        {% for t in all_tickers %}
          <label><input type="checkbox" name="tickers" value="{{ t }}" {% if t in request.form.getlist('tickers') %}checked{% endif %}> {{ t }}</label>
        {% endfor %}
      </fieldset>
      <button type="submit">Optimize</button>
    </form>

    {% if results %}
      <h2>Weights</h2>
      <table>
        <tr><th>Ticker</th><th>Weight</th></tr>
        {% for t, w in results.weights.items() %}
          <tr>
            <td>{{ t }}</td>
            <td>{{ "%.2f"|format(w) }}</td>
          </tr>
        {% endfor %}
      </table>

      <h2>Performance</h2>
      <ul>
        {% for metric, value in results.performance.items() %}
          <li>{{ metric }}: {{ value }}</li>
        {% endfor %}
      </ul>

      {% if img_data %}
        <h2>Efficient Frontier</h2>
        <img src="data:image/png;base64,{{ img_data }}" alt="Efficient Frontier">
      {% endif %}
    {% endif %}
  </body>
</html>
